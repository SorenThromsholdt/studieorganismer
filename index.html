<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Studieorganismer</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap">

<style>
  :root {
    /* Pastelfarver */
    --red-critical: #f28b82;     /* Rødlistet: CR/EN */
    --red-vulnerable: #fbbc04;   /* Rødlistet: VU */
    --green-protected: #81c995;  /* Fredet */
    --blue-bilag2: #8ab6e1;      /* Bilag II */
    --purple-bilag4: #b39ddb;    /* Bilag IV */
    --orange-bilag5: #f4b183;    /* Bilag V */

    /* Klassifikation */
    --invasive-red: #e57373;     /* Invasiv art */
    --nonnative-blue: #64b5f6;   /* Ikke hjemmehørende */
    --native-green: #81c784;     /* Hjemmehørende */

    /* Neutral */
    --neutral-grey: #d9d9d9;
    --soft-bg: #f4f7f5;
    --card-bg: #ffffff;

    /* Header gradient */
    --header-start: #5c8a64;
    --header-end: #7cae82;
  }

  body {
    margin: 0;
    background: var(--soft-bg);
    font-family: 'Nunito', sans-serif;
    color: #1d1d1d;
  }

  /* HEADER */
  /* HERO / HEADER */
  header {
    background: linear-gradient(120deg, var(--header-start), var(--header-end));
    color: white;
    padding: 64px 20px 28px;
    position: relative;
    z-index: 0;
  }

  .hero {
    max-width: 1100px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    gap: 28px;
    justify-content: space-between;
    padding: 8px 12px;
  }

  .hero-text {
    max-width: 720px;
  }

  header h1 {
    margin: 0 0 6px 0;
    font-size: 48px;
    line-height: 1.02;
    font-weight: 800;
    letter-spacing: -0.5px;
  }

  header .lead {
    margin: 0;
    font-size: 18px;
    font-weight: 400;
    opacity: 0.92;
    color: rgba(255,255,255,0.95);
  }

  .hero-illustration {
    /* removed: decorative illustration - kept for future use */
    display: none;
  }

  .logo-badge {
    display: none; /* removed decorative badge */
  }

  /* decorative wave at bottom of hero */
  .header-wave {
    display: block;
    width: 100%;
    height: 48px;
    position: absolute;
    left: 0;
    bottom: -1px;
    pointer-events: none;
    z-index: 0;
  }

  /* GRID */
  .grid {
    display: grid;
    gap: 28px;
    padding: 30px;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    position: relative;
    z-index: 5;
  }

  /* CARDS */
  .card {
    background: var(--card-bg);
    border-radius: 18px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
    overflow: hidden;
    cursor: pointer;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    display: flex;
    flex-direction: column;
    min-height: 350px;
    position: relative;
    z-index: 10;
    user-select: none;
    pointer-events: auto;
  }

  .card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 28px rgba(0,0,0,0.2);
  }

  .card img {
    width: 100%;
    height: 190px;
    object-fit: cover;
    display: block;
    background-color: #e0e0e0;
    cursor: pointer;
  }
  .card h2 {
    margin: 18px;
    font-size: 22px;
    font-weight: 700;
    flex: 1;
    cursor: pointer;
    user-select: none;
  }
  
  .card > * {
    cursor: pointer;
    user-select: none;
  }
  
  .latin {
    margin: -10px 18px 12px 18px;
    font-style: italic;
    color: #444;
    font-size: 15px;
    font-weight: 400;
    cursor: pointer;
    user-select: none;
  }

  /* BADGE AREA */
  .badges {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin: 0 18px 18px 18px;
    cursor: pointer;
    user-select: none;
  }
  .badge {
    padding: 6px 10px;
    font-size: 12px;
    z-index: 20;
    font-weight: 700;
    background: var(--neutral-grey);
    color: #1d1d1d;
    cursor: pointer;
    user-select: none;
  }

  /* ACTIVE COLORS (anvendes når flags/værdier er gældende) */
  .badge-class-native   { background: var(--native-green) !important; color: #fff; }
  .badge-class-invasive { background: var(--invasive-red) !important; color: #fff; }
  .badge-class-nonnative{ background: var(--nonnative-blue) !important; color: #fff; }

  .badge-protected      { background: var(--green-protected) !important; color: #fff; }
  .badge-bilag2         { background: var(--blue-bilag2) !important; color: #fff; }
  .badge-bilag4         { background: var(--purple-bilag4) !important; color: #fff; }
  .badge-bilag5         { background: var(--orange-bilag5) !important; color: #fff; }

  .badge-redlist-CR,
  .badge-redlist-EN { background: var(--red-critical) !important; color: #fff; }
  .badge-redlist-VU { background: var(--red-vulnerable) !important; color: #fff; }
  .badge-redlist-LC { background: #9ad29a !important; color: #fff; } /* lys grøn for LC */
  .badge-redlist-NT { background: #ffd166 !important; color: #1d1d1d; } /* nær truet */
  .badge-redlist-NA,
  .badge-redlist-DD,
  .badge-redlist--  { background: var(--neutral-grey) !important; color: #1d1d1d; }

  /* MODAL OVERLAY */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.45);
    backdrop-filter: blur(4px);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.25s ease;
    z-index: 1000;
  }
  .modal-overlay.active { opacity: 1; pointer-events: all; }

  /* MODAL WINDOW */
  .modal {
    position: fixed;
    top: 50%;
    left: 50%;
    width: 90%;
    max-width: 600px;
    background: white;
    border-radius: 22px;
    padding-bottom: 25px;
    transform: translate(-50%, -45%) scale(0.9);
    opacity: 0;
    transition: all 0.28s ease;
    z-index: 1010;
    box-shadow: 0 12px 40px rgba(0,0,0,0.2);
    pointer-events: none;
  }
  .modal.active {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
    pointer-events: auto;
  }

  .modal img {
    width: 100%;
    border-top-left-radius: 22px;
    border-top-right-radius: 22px;
    height: 220px;
    object-fit: cover;
  }

  .modal-content { 
    padding: 20px;
    pointer-events: none;
  }

  .modal.active .modal-content {
    pointer-events: auto;
  }

  .modal-content h2 {
    margin-top: 0;
    font-size: 26px;
    font-weight: 700;
  }
  .modal-content p.latin {
    margin: 0 0 15px 0;
    color: #666;
  }

  .modal-close {
    float: right;
    font-size: 26px;
    font-weight: bold;
    cursor: pointer;
    margin-top: -10px;
    margin-right: -5px;
    color: #333;
  }

  .modal-description {
    margin-top: 18px;
    line-height: 1.6;
    font-size: 16px;
  }
</style>
</head>

<body>

<header>
  <div class="hero">
    <div class="hero-text">
      <h1>Studieorganismer</h1>
      <p class="lead">Klik på en art for at læse mere</p>
    </div>
    <div class="hero-illustration" aria-hidden="true">
      <div class="logo-badge">SO</div>
    </div>
  </div>
  <svg class="header-wave" viewBox="0 0 1200 60" preserveAspectRatio="none" aria-hidden="true">
    <path d="M0,30 C300,90 900,-30 1200,30 L1200,60 L0,60 Z" fill="#ffffff" opacity="0.98"></path>
  </svg>
</header>

<!-- MODAL STRUCTURE -->
<div id="modalOverlay" class="modal-overlay"></div>

<div id="modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
  <div id="modalCloseBtn" class="modal-close" aria-label="Luk dialog">&times;</div>
  <img id="modalImg" src="" alt="">
  <div class="modal-content">
    <h2 id="modalTitle"></h2>
    <p id="modalLatin" class="latin"></p>
    <div id="modalBadges" class="badges"></div>
    <div id="modalDescription" class="modal-description"></div>
  </div>
</div>

<!-- GRID START -->
<div class="grid">

  <!--
    SÅDAN BRUGER DU data-badges:
    {
      "classification": "native" | "invasive" | "nonnative",
      "redlist": "CR|EN|VU|NT|LC|DD|NA|-"   (brug præcis koden du vil vise),
      "protected": true|false,
      "bilag2": true|false,
      "bilag4": true|false,
      "bilag5": true|false
    }
  -->

 <!-- 1. Aborre -->
<div class="card"
     data-title="Aborre"
     data-latin="Perca fluviatilis"
     data-img="https://upload.wikimedia.org/wikipedia/commons/9/91/Perca_fluviatilis.jpg"
     data-desc="Aborren er en meget almindelig dansk rovfisk, som let kendes på sin høje krop og de mørke lodrette striber. Den lever i søer, åer og brakvand og søger ofte føde i stimer. Aborren jager småfisk og vanddyr og spiller en vigtig rolle som regulator af økosystemer. I foråret gyder hunnen lange ægbånd, der hænger mellem planter eller grene. Arten foretrækker klart vand med god iltning og ses ofte nær strukturer som rødder og sten, hvor den kan jage effektivt."
     data-badges='{"classification":"native","redlist":"LC","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
  <img src="https://upload.wikimedia.org/wikipedia/commons/9/91/Perca_fluviatilis.jpg" alt="Aborre">
  <h2>Aborre</h2>
  <p class="latin">Perca fluviatilis</p>
  <div class="badges"></div>
</div>

<!-- 2. Trepigget hundestejle -->
<div class="card"
     data-title="Trepigget hundestejle"
     data-latin="Gasterosteus aculeatus"
     data-img="https://upload.wikimedia.org/wikipedia/commons/b/b2/Gasterosteus_aculeatus.jpg"
     data-desc="Hundestejlen er en lille fisk med tre karakteristiske pigge foran rygfinnen. Den forekommer i både salt-, brak- og ferskvand og kan danne store stimer om sommeren. Hannen bygger en rede af plantemateriale og får en rød bug i yngletiden. Den lever af små krebsdyr, insekter og larver og indgår som vigtig føde for større fisk og fugle."
     data-badges='{"classification":"native","redlist":"LC","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
  <img src="https://upload.wikimedia.org/wikipedia/commons/b/b2/Gasterosteus_aculeatus.jpg" alt="Trepigget hundestejle">
  <h2>Trepigget hundestejle</h2>
  <p class="latin">Gasterosteus aculeatus</p>
  <div class="badges"></div>
</div>

<!-- 3. Europæisk ål -->
<div class="card"
     data-title="Europæisk ål"
     data-latin="Anguilla anguilla"
     data-img="https://upload.wikimedia.org/wikipedia/commons/5/58/Anguilla_anguilla.jpg"
     data-desc="Den europæiske ål har en unik livscyklus, hvor den gyder i Sargassohavet og som glasål vandrer til Europa. Her vokser den op som gulål i ferske vande, før den som blankål vandrer tilbage mod gydeområderne. Arten er kritisk truet på grund af spærringer, sygdomme og historisk overfiskeri. Ålen er nataktiv og lever af smådyr og fisk. Den kan bevæge sig over land i fugtigt vejr."
     data-badges='{"classification":"native","redlist":"CR","protected":false,"bilag2":true,"bilag4":true,"bilag5":false}'>
  <img src="https://upload.wikimedia.org/wikipedia/commons/5/58/Anguilla_anguilla.jpg" alt="Europæisk ål">
  <h2>Europæisk ål</h2>
  <p class="latin">Anguilla anguilla</p>
  <div class="badges"></div>
</div>

<!-- 4. Stor vandsalamander -->
<div class="card"
     data-title="Stor vandsalamander"
     data-latin="Triturus cristatus"
     data-img="https://upload.wikimedia.org/wikipedia/commons/a/ab/TriturusCristatus.jpg"
     data-desc="Stor vandsalamander er Danmarks største salamander, kendetegnet ved mørk, vortet hud og en orange bug med store sorte pletter. Hannen udvikler en høj takket rygkam i yngletiden. Arten yngler i små, solrige vandhuller uden fisk. Efter larvestadiet lever de voksne på land, hvor de skjuler sig under sten og rødder. Den er følsom over for tilgroning og tab af vandhuller."
     data-badges='{"classification":"native","redlist":"LC","protected":true,"bilag2":true,"bilag4":true,"bilag5":false}'>
  <img src="https://upload.wikimedia.org/wikipedia/commons/a/ab/TriturusCristatus.jpg" alt="Stor vandsalamander">
  <h2>Stor vandsalamander</h2>
  <p class="latin">Triturus cristatus</p>
  <div class="badges"></div>
</div>

<!-- 5. Solaborre -->
<div class="card"
     data-title="Solaborre"
     data-latin="Lepomis gibbosus"
     data-img="https://upload.wikimedia.org/wikipedia/commons/1/19/Lepomis_gibbosus_-_Zoo_Frankfurt.jpg"
     data-desc="Solaborren er en farverig nordamerikansk fisk, der er indført til Europa. Den trives i varme, vegetationsrige søer og bygger redegruber, som hannen forsvarer aggressivt. Den æder insekter, små krebsdyr og fiskeyngel og kan påvirke lokale økosystemer negativt."
     data-badges='{"classification":"invasive","redlist":"NA","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
  <img src="https://upload.wikimedia.org/wikipedia/commons/1/19/Lepomis_gibbosus_-_Zoo_Frankfurt.jpg" alt="Solaborre">
  <h2>Solaborre</h2>
  <p class="latin">Lepomis gibbosus</p>
  <div class="badges"></div>
</div>

<!-- 6. Vandremusling -->
<div class="card"
     data-title="Vandremusling"
     data-latin="Dreissena polymorpha"
     data-img="https://upload.wikimedia.org/wikipedia/commons/e/e0/Dreissena_polymorpha.jpg"
     data-desc="Vandremuslingen er en lille filtrerende musling, der kan danne tætte bestande på sten og tekniske installationer. Den filtrerer store mængder vand og kan ændre økosystemer markant. Arten stammer fra Sortehavsområdet og har spredt sig til mange danske søer."
     data-badges='{"classification":"invasive","redlist":"NA","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
  <img src="https://upload.wikimedia.org/wikipedia/commons/e/e0/Dreissena_polymorpha.jpg" alt="Vandremusling">
  <h2>Vandremusling</h2>
  <p class="latin">Dreissena polymorpha</p>
  <div class="badges"></div>
</div>

<!-- 7. Lille vandsalamander -->
<div class="card"
     data-title="Lille vandsalamander"
     data-latin="Lissotriton vulgaris"
     data-img="https://upload.wikimedia.org/wikipedia/commons/f/f9/Lissotriton_vulgaris.jpg"
     data-desc="Lille vandsalamander er mindre end stor vandsalamander og har en orange bug med mørke pletter. Hannen får en lav bølget rygkam i yngletiden. Arten yngler i små vandhuller uden fisk og lever resten af året på land, hvor den jager smådyr."
     data-badges='{"classification":"native","redlist":"LC","protected":true,"bilag2":false,"bilag4":true,"bilag5":false}'>
  <img src="https://upload.wikimedia.org/wikipedia/commons/f/f9/Lissotriton_vulgaris.jpg" alt="Lille vandsalamander">
  <h2>Lille vandsalamander</h2>
  <p class="latin">Lissotriton vulgaris</p>
  <div class="badges"></div>
</div>

<!-- 8. Prymnesium parvum -->
<div class="card"
     data-title="Prymnesium parvum"
     data-latin="Prymnesium parvum"
     data-img="https://upload.wikimedia.org/wikipedia/commons/2/2c/Prymnesium_parvum.png"
     data-desc="En mikroskopisk alge, der kan danne giftige opblomstringer og forårsage fiskedød. Den trives i brakvand og mineralrigt ferskvand. Algen kan både fotosyntetisere og optage organiske stoffer og bakterier, hvilket gør den meget omstillingsdygtig."
     data-badges='{"classification":"nonnative","redlist":"-","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
  <img src="https://upload.wikimedia.org/wikipedia/commons/2/2c/Prymnesium_parvum.png" alt="Prymnesium parvum">
  <h2>Prymnesium parvum</h2>
  <p class="latin">Prymnesium parvum</p>
  <div class="badges"></div>
</div>

<!-- 9. Flodkrebs -->
<div class="card"
     data-title="Flodkrebs"
     data-latin="Astacus astacus"
     data-img="https://upload.wikimedia.org/wikipedia/commons/3/35/Astacus_astacus_01.jpg"
     data-desc="Flodkrebsen er Europas oprindelige ferskvandskrebseart. Den lever i rene, iltrige søer og vandløb og bliver op til 20 cm lang. Arten er truet af invasive krebsearter som signalkrebs, der bærer sygdommen krebsepest."
     data-badges='{"classification":"native","redlist":"VU","protected":false,"bilag2":false,"bilag4":false,"bilag5":true}'>
  <img src="https://upload.wikimedia.org/wikipedia/commons/3/35/Astacus_astacus_01.jpg" alt="Flodkrebs">
  <h2>Flodkrebs</h2>
  <p class="latin">Astacus astacus</p>
  <div class="badges"></div>
</div>

<!-- 10. Signalkrebs -->
<div class="card"
     data-title="Signalkrebs"
     data-latin="Pacifastacus leniusculus"
     data-img="https://upload.wikimedia.org/wikipedia/commons/3/36/Pacifastacus_leniusculus_1.jpg"
     data-desc="Signalkrebsen er en robust, invasiv art med en tydelig hvid plet ved klobasis. Den spreder sig hurtigt og bærer krebsepest, som dræber den hjemmehørende flodkrebs. Arten lever i både søer og vandløb."
     data-badges='{"classification":"invasive","redlist":"-","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
  <img src="https://upload.wikimedia.org/wikipedia/commons/3/36/Pacifastacus_leniusculus_1.jpg" alt="Signalkrebs">
  <h2>Signalkrebs</h2>
  <p class="latin">Pacifastacus leniusculus</p>
  <div class="badges"></div>
</div>

<!-- 11. Galizisk sumpkrebs -->
<div class="card"
     data-title="Galizisk sumpkrebs"
     data-latin="Astacus leptodactylus"
     data-img="https://upload.wikimedia.org/wikipedia/commons/4/4b/Astacus_leptodactylus_02.jpg"
     data-desc="En indført krebseart, der trives i næringsrige søer og langsomt strømmende vandløb. Den er større og mere tolerant over for dårlig vandkvalitet end flodkrebsen og kan udkonkurrere den."
     data-badges='{"classification":"invasive","redlist":"NA","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
  <img src="https://upload.wikimedia.org/wikipedia/commons/4/4b/Astacus_leptodactylus_02.jpg" alt="Galizisk sumpkrebs">
  <h2>Galizisk sumpkrebs</h2>
  <p class="latin">Astacus leptodactylus</p>
  <div class="badges"></div>
</div>

<!-- 12. Rødøret terrapin -->
<div class="card"
     data-title="Rødøret terrapin"
     data-latin="Trachemys scripta elegans"
     data-img="https://upload.wikimedia.org/wikipedia/commons/7/74/Red_eared_slider_turtle_basking_at_Taudaha_Lake.jpg"
     data-desc="Den rødørede terrapin er en vandlevende skildpadde, oprindeligt fra Nordamerika, ofte indført som kæledyr. Den kan overleve i danske søer og konkurrere med hjemmehørende arter. Den æder planter, insekter, fisk og padder."
     data-badges='{"classification":"invasive","redlist":"NA","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
  <img src="https://upload.wikimedia.org/wikipedia/commons/7/74/Red_eared_slider_turtle_basking_at_Taudaha_Lake.jpg" alt="Rødøret terrapin">
  <h2>Rødøret terrapin</h2>
  <p class="latin">Trachemys scripta elegans</p>
  <div class="badges"></div>
</div>

<!-- 13. Grønbroget tudse -->
<div class="card"
     data-title="Grønbroget tudse"
     data-latin="Bufotes viridis"
     data-img="https://upload.wikimedia.org/wikipedia/commons/d/da/Bufo_viridis_%28Lukasz_Lukasik%29.jpg"
     data-desc="Grønbroget tudse har et karakteristisk mønster af grønne pletter og findes i varme, tørre habitater som sandede områder og kystnære landskaber. Den yngler i lavvandede, solbelyste pytter og kan vandre langt mellem levesteder."
     data-badges='{"classification":"native","redlist":"EN","protected":true,"bilag2":false,"bilag4":true,"bilag5":false}'>
  <img src="https://upload.wikimedia.org/wikipedia/commons/d/da/Bufo_viridis_%28Lukasz_Lukasik%29.jpg" alt="Grønbroget tudse">
  <h2>Grønbroget tudse</h2>
  <p class="latin">Bufotes viridis</p>
  <div class="badges"></div>
</div>

<!-- 14. Strandtudse -->
<div class="card"
     data-title="Strandtudse"
     data-latin="Epidalea calamita"
     data-img="https://upload.wikimedia.org/wikipedia/commons/d/d5/Bufo_calamita_01.jpg"
     data-desc="Strandtudsen er en truet dansk padde kendt for sin lyse ryglinje og korte, kraftige krop. Den lever i sandede kystområder og yngler i lavvandede pytter, som kan tørre ud i løbet af sommeren. Arten er meget afhængig af forstyrrede, åbne habitater."
     data-badges='{"classification":"native","redlist":"VU","protected":true,"bilag2":false,"bilag4":true,"bilag5":false}'>
  <img src="https://upload.wikimedia.org/wikipedia/commons/d/d5/Bufo_calamita_01.jpg" alt="Strandtudse">
  <h2>Strandtudse</h2>
  <p class="latin">Epidalea calamita</p>
  <div class="badges"></div>
</div>

<!-- 15. Europæisk malle -->
<div class="card"
     data-title="Europæisk malle"
     data-latin="Silurus glanis"
     data-img="https://upload.wikimedia.org/wikipedia/commons/2/2e/Silurus_glanis_head_detail.jpg"
     data-desc="Mallen er en af Europas største ferskvandsfisk og kan nå flere meter i længde i andre lande. I Danmark er den sjælden og lever i større søer. Den er en rovfisk, der jager fisk, krebsdyr og i store eksemplarer fugle og mindre pattedyr."
     data-badges='{"classification":"nonnative","redlist":"NA","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
  <img src="https://upload.wikimedia.org/wikipedia/commons/2/2e/Silurus_glanis_head_detail.jpg" alt="Europæisk malle">
  <h2>Europæisk malle</h2>
  <p class="latin">Silurus glanis</p>
  <div class="badges"></div>
</div>

<!-- 16. Karpe -->
<div class="card"
     data-title="Karpe"
     data-latin="Cyprinus carpio"
     data-img="https://upload.wikimedia.org/wikipedia/commons/9/99/Caprinus_carpio_Prague_Vltava_1.jpg"
     data-desc="Karpen er en stor, robust fisk, som trives i varme, næringsrige søer. Den roder i sedimentet, hvilket kan gøre vandet uklart. Karpen er altædende og er i Danmark både udsat til fiskeri og holdt i dambrug."
     data-badges='{"classification":"nonnative","redlist":"NA","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
  <img src="https://upload.wikimedia.org/wikipedia/commons/9/99/Caprinus_carpio_Prague_Vltava_1.jpg" alt="Karpe">
  <h2>Karpe</h2>
  <p class="latin">Cyprinus carpio</p>
  <div class="badges"></div>
</div>
  
</div> <!-- end .grid -->

<script>
/** Helper: lav badge element med label og (valgfri) farveklasse */
function createBadge(label, activeClass) {
  const span = document.createElement('span');
  span.className = 'badge' + (activeClass ? (' ' + activeClass) : '');
  span.textContent = label;
  return span;
}

/** Helper: find farveklasse til rødlistet */
function redlistClass(code) {
  const normalized = (code || '-').toUpperCase();
  const allowed = ['CR','EN','VU','NT','LC','DD','NA','-'];
  const safe = allowed.includes(normalized) ? normalized : '-';
  return 'badge-redlist-' + safe;
}

/** Helper: farveklasse til klassifikation (mutual exclusive) */
function classificationClass(c) {
  if (!c) return '';
  const v = c.toLowerCase();
  if (v === 'native') return 'badge-class-native';
  if (v === 'invasive') return 'badge-class-invasive';
  if (v === 'nonnative') return 'badge-class-nonnative';
  return '';
}

/** Renderer: generér den fulde, altid-viste badges-række */
function renderBadgesRow(containerEl, meta) {
  containerEl.innerHTML = '';

  // 1) Klassifikation (mutual exclusive, men vis ALTID feltet)
  // Vi viser label afhængigt af valg, men kun EN farves.
  const classMap = {
    native:   'Hjemmehørende',
    invasive: 'Invasiv art',
    nonnative:'Ikke hjemmehørende'
  };
  const activeClass = classificationClass(meta.classification);
  const classLabel = classMap[meta.classification] || 'Hjemmehørende';
  containerEl.appendChild(createBadge(classLabel, activeClass));

  // 2) Rødlistet (vis altid: med kode)
  const code = (meta.redlist || '-').toUpperCase();
  containerEl.appendChild(createBadge('Rødlistet: ' + code, redlistClass(code)));

  // 3) Fredet (vis altid, farv hvis true)
  containerEl.appendChild(createBadge('Fredet', meta.protected ? 'badge-protected' : ''));

  // 4) Bilag II (vis altid)
  containerEl.appendChild(createBadge('Bilag II', meta.bilag2 ? 'badge-bilag2' : ''));

  // 5) Bilag IV (vis altid)
  containerEl.appendChild(createBadge('Bilag IV', meta.bilag4 ? 'badge-bilag4' : ''));

  // 6) Bilag V (vis altid)
  containerEl.appendChild(createBadge('Bilag V', meta.bilag5 ? 'badge-bilag5' : ''));
}

/** Åbn modal */
function openModalFromCard(card) {
  const imgUrl = card.getAttribute('data-img') || '';
  const title = card.getAttribute('data-title') || '';
  const latin = card.getAttribute('data-latin') || '';
  const meta = JSON.parse(card.getAttribute('data-badges') || '{}');

  document.getElementById('modalImg').src = imgUrl;
  document.getElementById('modalImg').alt = title;
  document.getElementById('modalTitle').textContent = title;
  document.getElementById('modalLatin').textContent = latin;

  const wrap = document.getElementById('modalBadges');
  renderBadgesRow(wrap, meta);

  // Beskrivelsen kan evt. ligge i data-desc (valgfrit)
  const desc = card.getAttribute('data-desc') || '';
  document.getElementById('modalDescription').innerHTML = desc;

  document.getElementById('modalOverlay').classList.add('active');
  document.getElementById('modal').classList.add('active');
  document.body.style.overflow = 'hidden';
}

/** Luk modal */
function closeModal() {
  document.getElementById('modalOverlay').classList.remove('active');
  document.getElementById('modal').classList.remove('active');
  document.body.style.overflow = '';
}

/** Init: Render inline badges for alle kort + klik-håndtering */
document.addEventListener('DOMContentLoaded', () => {
  const cards = document.querySelectorAll('.card');
  cards.forEach(card => {
    const meta = JSON.parse(card.getAttribute('data-badges') || '{}');
    const row = card.querySelector('.badges');
    if (row) renderBadgesRow(row, meta);

    // Click handler opens modal
    card.addEventListener('click', function() {
      openModalFromCard(this);
    });

    // Hover handlers toggle a CSS class (keeps hit area stable)
    card.addEventListener('mouseenter', () => card.classList.add('hovered'));
    card.addEventListener('mouseleave', () => card.classList.remove('hovered'));
  });

  // Close modal when clicking overlay or close button
  document.getElementById('modalOverlay').addEventListener('click', closeModal);
  document.getElementById('modalCloseBtn').addEventListener('click', closeModal);
});
document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });
</script>

</body>
</html>
