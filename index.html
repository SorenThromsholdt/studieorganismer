<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Studieorganismer</title>

<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet" />

<style>
  :root {
    /* Pastelfarver */
    --red-critical: #f28b82;     /* Rødlistet: CR/EN */
    --red-vulnerable: #fbbc04;   /* Rødlistet: VU */
    --green-protected: #81c995;  /* Fredet */
    --blue-bilag2: #8ab6e1;      /* Bilag II */
    --purple-bilag4: #b39ddb;    /* Bilag IV */
    --orange-bilag5: #f4b183;    /* Bilag V */

    /* Klassifikation */
    --invasive-red: #e57373;     /* Invasiv art */
    --nonnative-blue: #64b5f6;   /* Ikke hjemmehørende */
    --native-green: #81c784;     /* Hjemmehørende */

    /* Neutral */
    --neutral-grey: #d9d9d9;
    --soft-bg: #f4f7f5;
    --card-bg: #ffffff;

    /* Header gradient */
    --header-start: #5c8a64;
    --header-end: #7cae82;
  }

  body {
    margin: 0;
    background: var(--soft-bg);
    font-family: 'Nunito', sans-serif;
    color: #1d1d1d;
  }

  /* HEADER */
  header {
    background: linear-gradient(135deg, var(--header-start), var(--header-end));
    text-align: center;
    padding: 55px 20px;
    color: white;
  }
  header h1 {
    margin: 0;
    font-size: 44px;
    font-weight: 700;
    letter-spacing: 0.5px;
  }
  header p {
    margin-top: 12px;
    font-size: 19px;
    font-weight: 300;
    opacity: 0.95;
  }

  /* GRID */
  .grid {
    display: grid;
    gap: 28px;
    padding: 30px;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  }

  /* CARDS */
  .card {
    background: var(--card-bg);
    border-radius: 18px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
    overflow: hidden;
    cursor: pointer;
    transition: transform 0.3s ease;
  }
  .card:hover { transform: translateY(-6px); }

  .card img {
    width: 100%;
    height: 190px;
    object-fit: cover;
  }
  .card h2 {
    margin: 18px;
    font-size: 22px;
    font-weight: 700;
  }
  .latin {
    margin: -10px 18px 12px 18px;
    font-style: italic;
    color: #444;
    font-size: 15px;
    font-weight: 400;
  }

  /* BADGE AREA */
  .badges {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin: 0 18px 18px 18px;
  }
  .badge {
    padding: 6px 10px;
    font-size: 12px;
    border-radius: 8px;
    font-weight: 700;
    background: var(--neutral-grey);
    color: #1d1d1d;
  }

  /* ACTIVE COLORS (anvendes når flags/værdier er gældende) */
  .badge-class-native   { background: var(--native-green) !important; color: #fff; }
  .badge-class-invasive { background: var(--invasive-red) !important; color: #fff; }
  .badge-class-nonnative{ background: var(--nonnative-blue) !important; color: #fff; }

  .badge-protected      { background: var(--green-protected) !important; color: #fff; }
  .badge-bilag2         { background: var(--blue-bilag2) !important; color: #fff; }
  .badge-bilag4         { background: var(--purple-bilag4) !important; color: #fff; }
  .badge-bilag5         { background: var(--orange-bilag5) !important; color: #fff; }

  .badge-redlist-CR,
  .badge-redlist-EN { background: var(--red-critical) !important; color: #fff; }
  .badge-redlist-VU { background: var(--red-vulnerable) !important; color: #fff; }
  .badge-redlist-LC { background: #9ad29a !important; color: #fff; } /* lys grøn for LC */
  .badge-redlist-NT { background: #ffd166 !important; color: #1d1d1d; } /* nær truet */
  .badge-redlist-NA,
  .badge-redlist-DD,
  .badge-redlist--  { background: var(--neutral-grey) !important; color: #1d1d1d; }

  /* MODAL OVERLAY */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.45);
    backdrop-filter: blur(4px);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.25s ease;
    z-index: 1000;
  }
  .modal-overlay.active { opacity: 1; pointer-events: all; }

  /* MODAL WINDOW */
  .modal {
    position: fixed;
    top: 50%;
    left: 50%;
    width: 90%;
    max-width: 600px;
    background: white;
    border-radius: 22px;
    padding-bottom: 25px;
    transform: translate(-50%, -45%) scale(0.9);
    opacity: 0;
    transition: all 0.28s ease;
    z-index: 1010;
    box-shadow: 0 12px 40px rgba(0,0,0,0.2);
  }
  .modal.active {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }

  .modal img {
    width: 100%;
    border-top-left-radius: 22px;
    border-top-right-radius: 22px;
    height: 220px;
    object-fit: cover;
  }

  .modal-content { padding: 20px; }

  .modal-content h2 {
    margin-top: 0;
    font-size: 26px;
    font-weight: 700;
  }
  .modal-content p.latin {
    margin: 0 0 15px 0;
    color: #666;
  }

  .modal-close {
    float: right;
    font-size: 26px;
    font-weight: bold;
    cursor: pointer;
    margin-top: -10px;
    margin-right: -5px;
    color: #333;
  }

  .modal-description {
    margin-top: 18px;
    line-height: 1.6;
    font-size: 16px;
  }
</style>
</head>

<body>

<header>
  <h1>Studieorganismer</h1>
  <p>Klik på en art for at læse mere</p>
</header>

<!-- MODAL STRUCTURE -->
<div id="modalOverlay" class="modal-overlay"></div>

<div id="modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
  <div class="modal-close" onclick="closeModal()" aria-label="Luk dialog">&times;</div>
  <img id="modalImg" src="" alt="">
  <div class="modal-content">
    <h2 id="modalTitle"></h2>
    <p id="modalLatin" class="latin"></p>
    <div id="modalBadges" class="badges"></div>
    <div id="modalDescription" class="modal-description"></div>
  </div>
</div>

<!-- GRID START -->
<div class="grid">

  <!--
    SÅDAN BRUGER DU data-badges:
    {
      "classification": "native" | "invasive" | "nonnative",
      "redlist": "CR|EN|VU|NT|LC|DD|NA|-"   (brug præcis koden du vil vise),
      "protected": true|false,
      "bilag2": true|false,
      "bilag4": true|false,
      "bilag5": true|false
    }
  -->

  <!-- 1. Aborre (Hjemmehørende, LC) -->
  <div class="card"
       data-title="Aborre"
       data-latin="Perca fluviatilis"
       data-img="https://upload.wikimedia.org/wikipedia/commons/7/73/Perca_fluviatilis2.jpg"
       data-badges='{"classification":"native","redlist":"LC","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
    <img src="https://upload.wikimedia.org/wikipedia/commons/7/73/Perca_fluviatilis2.jpg" alt="Aborre">
    <h2>Aborre</h2>
    <p class="latin">Perca fluviatilis</p>
    <div class="badges"></div>
  </div>

  <!-- 2. Trepigget hundestejle (Hjemmehørende, LC) -->
  <div class="card"
       data-title="Trepigget hundestejle"
       data-latin="Gasterosteus aculeatus"
       data-img="https://upload.wikimedia.org/wikipedia/commons/7/79/Gasterosteus_aculeatus_P1190887a.jpg"
       data-badges='{"classification":"native","redlist":"LC","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
    <img src="https://upload.wikimedia.org/wikipedia/commons/7/79/Gasterosteus_aculeatus_P1190887a.jpg" alt="Trepigget hundestejle">
    <h2>Trepigget hundestejle</h2>
    <p class="latin">Gasterosteus aculeatus</p>
    <div class="badges"></div>
  </div>

  <!-- 3. Europæisk ål (Hjemmehørende, CR, Bilag II+IV) -->
  <div class="card"
       data-title="Europæisk ål"
       data-latin="Anguilla anguilla"
       data-img="https://upload.wikimedia.org/wikipedia/commons/b/b3/Anguilla_anguilla1.jpg"
       data-badges='{"classification":"native","redlist":"CR","protected":false,"bilag2":true,"bilag4":true,"bilag5":false}'>
    <img src="https://upload.wikimedia.org/wikipedia/commons/b/b3/Anguilla_anguilla1.jpg" alt="Europæisk ål">
    <h2>Europæisk ål</h2>
    <p class="latin">Anguilla anguilla</p>
    <div class="badges"></div>
  </div>

  <!-- 4. Stor vandsalamander (Hjemmehørende, LC, Fredet, Bilag II+IV) -->
  <div class="card"
       data-title="Stor vandsalamander"
       data-latin="Triturus cristatus"
       data-img="https://upload.wikimedia.org/wikipedia/commons/0/0a/Triturus_cristatus_MHNT.jpg"
       data-badges='{"classification":"native","redlist":"LC","protected":true,"bilag2":true,"bilag4":true,"bilag5":false}'>
    <img src="https://upload.wikimedia.org/wikipedia/commons/0/0a/Triturus_cristatus_MHNT.jpg" alt="Stor vandsalamander">
    <h2>Stor vandsalamander</h2>
    <p class="latin">Triturus cristatus</p>
    <div class="badges"></div>
  </div>

  <!-- 5. Solaborre (Invasiv, NA) -->
  <div class="card"
       data-title="Solaborre"
       data-latin="Lepomis gibbosus"
       data-img="https://upload.wikimedia.org/wikipedia/commons/4/4f/Lepomis_gibbosus_01.jpg"
       data-badges='{"classification":"invasive","redlist":"NA","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
    <img src="https://upload.wikimedia.org/wikipedia/commons/4/4f/Lepomis_gibbosus_01.jpg" alt="Solaborre">
    <h2>Solaborre</h2>
    <p class="latin">Lepomis gibbosus</p>
    <div class="badges"></div>
  </div>

  <!-- 6. Vandremusling (Invasiv, NA) -->
  <div class="card"
       data-title="Vandremusling"
       data-latin="Dreissena polymorpha"
       data-img="https://upload.wikimedia.org/wikipedia/commons/6/6b/Dreissena_polymorpha.jpg"
       data-badges='{"classification":"invasive","redlist":"NA","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/Dreissena_polymorpha.jpg" alt="Vandremusling">
    <h2>Vandremusling</h2>
    <p class="latin">Dreissena polymorpha</p>
    <div class="badges"></div>
  </div>

  <!-- 7. Lille vandsalamander (Hjemmehørende, LC, Fredet, Bilag IV) -->
  <div class="card"
       data-title="Lille vandsalamander"
       data-latin="Lissotriton vulgaris"
       data-img="https://upload.wikimedia.org/wikipedia/commons/c/c5/Lissotriton_vulgaris_01.jpg"
       data-badges='{"classification":"native","redlist":"LC","protected":true,"bilag2":false,"bilag4":true,"bilag5":false}'>
    <img src="https://upload.wikimedia.org/wikipedia/commons/c/c5/Lissotriton_vulgaris_01.jpg" alt="Lille vandsalamander">
    <h2>Lille vandsalamander</h2>
    <p class="latin">Lissotriton vulgaris</p>
    <div class="badges"></div>
  </div>

  <!-- 8. Prymnesium parvum (Ikke hjemmehørende, -) -->
  <div class="card"
       data-title="Prymnesium parvum"
       data-latin="Prymnesium parvum"
       data-img="https://upload.wikimedia.org/wikipedia/commons/4/4c/Prymnesium_parvum.jpg"
       data-badges='{"classification":"nonnative","redlist":"-","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
    <img src="https://upload.wikimedia.org/wikipedia/commons/4/4c/Prymnesium_parvum.jpg" alt="Prymnesium parvum">
    <h2>Prymnesium parvum</h2>
    <p class="latin">Prymnesium parvum</p>
    <div class="badges"></div>
  </div>

  <!-- 9. Flodkrebs (Hjemmehørende, VU, Bilag V) -->
  <div class="card"
       data-title="Flodkrebs"
       data-latin="Astacus astacus"
       data-img="https://upload.wikimedia.org/wikipedia/commons/a/a9/Astacus_astacus2.jpg"
       data-badges='{"classification":"native","redlist":"VU","protected":false,"bilag2":false,"bilag4":false,"bilag5":true}'>
    <img src="https://upload.wikimedia.org/wikipedia/commons/a/a9/Astacus_astacus2.jpg" alt="Flodkrebs">
    <h2>Flodkrebs</h2>
    <p class="latin">Astacus astacus</p>
    <div class="badges"></div>
  </div>

  <!-- 10. Signalkrebs (Invasiv, -) -->
  <div class="card"
       data-title="Signalkrebs"
       data-latin="Pacifastacus leniusculus"
       data-img="https://upload.wikimedia.org/wikipedia/commons/4/4f/Pacifastacus_leniusculus.jpg"
       data-badges='{"classification":"invasive","redlist":"-","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
    <img src="https://upload.wikimedia.org/wikipedia/commons/4/4f/Pacifastacus_leniusculus.jpg" alt="Signalkrebs">
    <h2>Signalkrebs</h2>
    <p class="latin">Pacifastacus leniusculus</p>
    <div class="badges"></div>
  </div>

  <!-- 11. Galizisk sumpkrebs (Invasiv, NA) -->
  <div class="card"
       data-title="Galizisk sumpkrebs"
       data-latin="Astacus leptodactylus"
       data-img="https://upload.wikimedia.org/wikipedia/commons/7/71/Pontastacus_leptodactylus.png"
       data-badges='{"classification":"invasive","redlist":"NA","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
    <img src="https://upload.wikimedia.org/wikipedia/commons/7/71/Pontastacus_leptodactylus.png" alt="Galizisk sumpkrebs">
    <h2>Galizisk sumpkrebs</h2>
    <p class="latin">Astacus leptodactylus</p>
    <div class="badges"></div>
  </div>

  <!-- 12. Rødøret terrapin (Invasiv, NA) -->
  <div class="card
       " data-title="Rødøret terrapin"
       data-latin="Trachemys scripta elegans"
       data-img="https://upload.wikimedia.org/wikipedia/commons/5/5e/Trachemys_scripta_elegans_closeup.jpg"
       data-badges='{"classification":"invasive","redlist":"NA","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
    <img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Trachemys_scripta_elegans_closeup.jpg" alt="Rødøret terrapin">
    <h2>Rødøret terrapin</h2>
    <p class="latin">Trachemys scripta elegans</p>
    <div class="badges"></div>
  </div>

  <!-- 13. Grønbroget tudse (Hjemmehørende, EN, Fredet, Bilag IV) -->
  <div class="card"
       data-title="Grønbroget tudse"
       data-latin="Bufotes viridis"
       data-img="https://upload.wikimedia.org/wikipedia/commons/1/1d/Bufo_viridis_2.jpg"
       data-badges='{"classification":"native","redlist":"EN","protected":true,"bilag2":false,"bilag4":true,"bilag5":false}'>
    <img src="https://upload.wikimedia.org/wikipedia/commons/1/1d/Bufo_viridis_2.jpg" alt="Grønbroget tudse">
    <h2>Grønbroget tudse</h2>
    <p class="latin">Bufotes viridis</p>
    <div class="badges"></div>
  </div>

  <!-- 14. Strandtudse (Hjemmehørende, VU, Fredet, Bilag IV) -->
  <div class="card"
       data-title="Strandtudse"
       data-latin="Epidalea calamita"
       data-img="https://upload.wikimedia.org/wikipedia/commons/8/80/Epidalea_calamita_1.jpg"
       data-badges='{"classification":"native","redlist":"VU","protected":true,"bilag2":false,"bilag4":true,"bilag5":false}'>
    <img src="https://upload.wikimedia.org/wikipedia/commons/8/80/Epidalea_calamita_1.jpg" alt="Strandtudse">
    <h2>Strandtudse</h2>
    <p class="latin">Epidalea calamita</p>
    <div class="badges"></div>
  </div>

  <!-- 15. Europæisk malle (Ikke hjemmehørende, NA) -->
  <div class="card"
       data-title="Europæisk malle"
       data-latin="Silurus glanis"
       data-img="https://upload.wikimedia.org/wikipedia/commons/3/35/Silurus_glanis_-_Karlsruhe_Zoo_01.jpg"
       data-badges='{"classification":"nonnative","redlist":"NA","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
    <img src="https://upload.wikimedia.org/wikipedia/commons/3/35/Silurus_glanis_-_Karlsruhe_Zoo_01.jpg" alt="Europæisk malle">
    <h2>Europæisk malle</h2>
    <p class="latin">Silurus glanis</p>
    <div class="badges"></div>
  </div>

  <!-- 16. Karpe (Ikke hjemmehørende, NA) -->
  <div class="card"
       data-title="Karpe"
       data-latin="Cyprinus carpio"
       data-img="https://upload.wikimedia.org/wikipedia/commons/0/0b/Cyprinus_carpio.jpeg"
       data-badges='{"classification":"nonnative","redlist":"NA","protected":false,"bilag2":false,"bilag4":false,"bilag5":false}'>
    <img src="https://upload.wikimedia.org/wikipedia/commons/0/0b/Cyprinus_carpio.jpeg" alt="Karpe">
    <h2>Karpe</h2>
    <p class="latin">Cyprinus carpio</p>
    <div class="badges"></div>
  </div>

</div> <!-- end .grid -->

<script>
/** Helper: lav badge element med label og (valgfri) farveklasse */
function createBadge(label, activeClass) {
  const span = document.createElement('span');
  span.className = 'badge' + (activeClass ? (' ' + activeClass) : '');
  span.textContent = label;
  return span;
}

/** Helper: find farveklasse til rødlistet */
function redlistClass(code) {
  const normalized = (code || '-').toUpperCase();
  const allowed = ['CR','EN','VU','NT','LC','DD','NA','-'];
  const safe = allowed.includes(normalized) ? normalized : '-';
  return 'badge-redlist-' + safe;
}

/** Helper: farveklasse til klassifikation (mutual exclusive) */
function classificationClass(c) {
  if (!c) return '';
  const v = c.toLowerCase();
  if (v === 'native') return 'badge-class-native';
  if (v === 'invasive') return 'badge-class-invasive';
  if (v === 'nonnative') return 'badge-class-nonnative';
  return '';
}

/** Renderer: generér den fulde, altid-viste badges-række */
function renderBadgesRow(containerEl, meta) {
  containerEl.innerHTML = '';

  // 1) Klassifikation (mutual exclusive, men vis ALTID feltet)
  // Vi viser label afhængigt af valg, men kun EN farves.
  const classMap = {
    native:   'Hjemmehørende',
    invasive: 'Invasiv art',
    nonnative:'Ikke hjemmehørende'
  };
  const activeClass = classificationClass(meta.classification);
  const classLabel = classMap[meta.classification] || 'Hjemmehørende';
  containerEl.appendChild(createBadge(classLabel, activeClass));

  // 2) Rødlistet (vis altid: med kode)
  const code = (meta.redlist || '-').toUpperCase();
  containerEl.appendChild(createBadge('Rødlistet: ' + code, redlistClass(code)));

  // 3) Fredet (vis altid, farv hvis true)
  containerEl.appendChild(createBadge('Fredet', meta.protected ? 'badge-protected' : ''));

  // 4) Bilag II (vis altid)
  containerEl.appendChild(createBadge('Bilag II', meta.bilag2 ? 'badge-bilag2' : ''));

  // 5) Bilag IV (vis altid)
  containerEl.appendChild(createBadge('Bilag IV', meta.bilag4 ? 'badge-bilag4' : ''));

  // 6) Bilag V (vis altid)
  containerEl.appendChild(createBadge('Bilag V', meta.bilag5 ? 'badge-bilag5' : ''));
}

/** Åbn modal */
function openModalFromCard(card) {
  const imgUrl = card.getAttribute('data-img') || '';
  const title = card.getAttribute('data-title') || '';
  const latin = card.getAttribute('data-latin') || '';
  const meta = JSON.parse(card.getAttribute('data-badges') || '{}');

  document.getElementById('modalImg').src = imgUrl;
  document.getElementById('modalImg').alt = title;
  document.getElementById('modalTitle').textContent = title;
  document.getElementById('modalLatin').textContent = latin;

  const wrap = document.getElementById('modalBadges');
  renderBadgesRow(wrap, meta);

  // Beskrivelsen kan evt. ligge i data-desc (valgfrit)
  const desc = card.getAttribute('data-desc') || '';
  document.getElementById('modalDescription').innerHTML = desc;

  document.getElementById('modalOverlay').classList.add('active');
  document.getElementById('modal').classList.add('active');
  document.body.style.overflow = 'hidden';
}

/** Luk modal */
function closeModal() {
  document.getElementById('modalOverlay').classList.remove('active');
  document.getElementById('modal').classList.remove('active');
  document.body.style.overflow = '';
}

/** Init: Render inline badges for alle kort + klik-håndtering */
document.addEventListener('DOMContentLoaded', () => {
  const cards = document.querySelectorAll('.card');
  cards.forEach(card => {
    const meta = JSON.parse(card.getAttribute('data-badges') || '{}');
    const row = card.querySelector('.badges');
    if (row) renderBadgesRow(row, meta);

    card.addEventListener('click', () => openModalFromCard(card));
  });

  document.getElementById('modalOverlay').addEventListener('click', closeModal);
});
document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });
</script>

</body>
</html>
